<!DOCTYPE html>
{% include 'header.html' %}
<head>
    <style>
         body {
            font-family: Arial, sans-serif;
            background-color: #f5f5f5;
            margin: 0;
            padding-top: 10px;
        }
        .main-content1{
            min-height: calc(75vh - 80px);
        }
        h2 {
            background-color: rgb(203, 210, 218);
            color: #fff;
            padding: 10px;
            text-align: center;
        }
        .form_cont{
            display: flex;
            flex-wrap: wrap;
            justify-content: space-around;
            gap: 10px;
        }
        form {
            flex: 1 1 400px;
            min-width: 400px;
            margin: 0 auto;
            padding: 20px;
            background-color: #fff;
            border: 1px solid #ddd;
            box-shadow: 0 0 10px rgba(0, 0, 0, 0.1);
        }
        .bo_form{
            width: auto;
            padding: 10px;
            margin: 0 auto;
        }
        label {
            display: block;
            margin-bottom: 5px;
        }
        input[type="text"], input[type="number"] {
            width: 95%;
            padding: 10px;
            margin-bottom: 10px;
            border: 1px solid #ccc;
            border-radius: 5px;
        }
        button {
            display: block;
            width: 100%;
            padding: 10px;
            background-color: rgb(203, 210, 218);
            color: black;
            border: none;
            border-radius: 5px;
            cursor: pointer;
        }
        button:hover {
            background-color: rgb(71, 74, 74);
        }
        p {
            font-weight: bold;
            text-align: center;
        }
        ul {
            list-style-type: none;
            padding: 0;
        }
        ul li {
            margin-bottom: 5px;
        }
    </style>
</head>
<body>
<div class="main-content1">
    <h2>Search</h2>
    <div class="form_cont">
        <form action="{{ url_for('database_overview') }}" method="get">
                <label for="itemID">Enter Item ID:</label>
                <input type="text" id="itemID" name="itemID" required>
                <button type="button">Search</button>
        </form>
        <form action="{{ url_for('search') }}" method="get">
            <label for="authorID">Enter Author ID:</label>
            <input type="text" id="authorID" name="authorID" required>
            <button type="button">Search</button>
        </form>
        <form action="{{ url_for('search') }}" method="post">
            <label for="patID">Enter Patron ID:</label>
            <input type="text" id="patID" name="patID" required>
            <button type="button" onclick="togglePatronTable()">Search</button>
        </form>
        <form action="{{ url_for('search') }}" method="get" class="bo_form">
            <label for="itemCondition">Search for Damaged books:</label>
            <button type="button" onclick="toggleDamagedTable()" id="damaged" name="damaged">Search</button>
            <table id="damagedTable" style="display: none">
                <tr>
                    <th>Item ID</th>
                    <th>Title</th>
                    <th>Publish Date</th>
                    <th>Branch</th>
                    <th>Type ID</th>
                    <th>Checked Out</th>
                    <th>Available</th>
                    <th>Condition</th>
                    <th>Secure</th>
                </tr>
                {% for item in items %}
                    {% if item.itemCondition == "Damaged" %}
                        <tr>
                            <td>{{ item.itemID }}</td>
                            <td>{{ item.itemTitle }}</td>
                            <td>{{ item.publishDate }}</td>
                            <td>{{ item.itemBranch }}</td>
                            <td>{{ item.typeID }}</td>
                            <td>{{ item.isCheckedOut }}</td>
                            <td>{{ item.isAvailable }}</td>
                            <td>{{ item.itemCondition }}</td>
                            <td>{{ item.isSecure }}</td>
                        </tr>
                    {% endif %}
                {% endfor %}
            </table>
        </form>
        <form action="{{ url_for('search') }}" method="get" class="bo_form">
        <label for="isCheckedOut">Search for Checked-out books:</label>
        <button type="button" onclick="toggleCheckOutTable()" id="isCheckedOut" name="isCheckedOut">Search</button>
        <table id="checkoutTable" style="display: none">
            <tr>
                <th>Checkout ID</th>
                <th>Patron ID</th>
                <th>Item ID</th>
                <th>Due Date</th>
            </tr>
            {% for checkout in checkouts %}
                <tr>
                    <td>{{ checkout.checkoutID }}</td>
                    <td>{{ checkout.patronID }}</td>
                    <td>{{ checkout.itemID }}</td>
                    <td>{{ checkout.dueDate }}</td>
                </tr>
            {% endfor %}
        </table>
    </form>
    </div>
{#    Patron Table#}
    <table id="patronTable" style="display: none">
        <h2 id="patronTitle" style="display: none">Patrons</h2>
        <tr>
            <th>ID</th>
            <th>First Name</th>
            <th>Last Name</th>
            <th>Email</th>
            <th>Phone Number</th>
            <th>Account Balance</th>
            <th>Items Rented</th>
            <th>Date Created</th>
        </tr>
        {% for patron in patrons %}
            {% if patron.patronID == patID %}
                <tr>
                    <td>{{ patron.patronID }}</td>
                    <td>{{ patron.firstName }}</td>
                    <td>{{ patron.lastName }}</td>
                    <td>{{ patron.email }}</td>
                    <td>{{ patron.phoneNum }}</td>
                    <td>{{ patron.acctBalance }}</td>
                    <td>{{ patron.itemsRented }}</td>
                    <td>{{ patron.date_created }}</td>
                </tr>
            {% endif %}
        {% endfor %}
    </table>
</div>
<script>
        function toggleCheckOutTable() {
            var checkoutTable = document.getElementById("checkoutTable");
            if (checkoutTable.style.display === "none") {
                checkoutTable.style.display = "table";
            } else {
                checkoutTable.style.display = "none";
            }
        }
        function toggleDamagedTable() {
            var damagedTable = document.getElementById("damagedTable");
            if (damagedTable.style.display === "none") {
                damagedTable.style.display = "table";
            } else {
                damagedTable.style.display = "none";
            }
        }
        function togglePatronTable() {
            var patronTable = document.getElementById("patronTable");
            var patronTitle = document.getElementById("patronTitle")
            if (patronTable.style.display === "none") {
                patronTable.style.display = "table";
                patronTitle.style.display = "block";
            } else {
                patronTable.style.display = "none";
                patronTitle.style.display = "none";
            }
        }
</script>
{% include 'footer.html' %}